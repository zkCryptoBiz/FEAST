!function(){function e(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function n(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(e){r(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function r(e,n,r){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}System.register(["./app-legacy.Dy1QKECF.js","./RememberMeDescriptionText-legacy.DkSMUMjd.js"],(function(e,r){"use strict";var t,o,i,a,l,u,c,s,p,m,d,_,f,h,b,v,y,g,I,O,E,P,j,x,k,B,C,w,N,S,z,R,T,M,D,F,L,$,A;return{setters:[e=>{t=e.w,o=e.a,i=e.d$,a=e.cv,l=e.e8,u=e.H,c=e.A,s=e.ab,p=e.$,m=e.G,d=e.e9,_=e.b_,f=e.ea,h=e.T,b=e.c0,v=e.O,y=e.c1,g=e.N,I=e.X,O=e.K,E=e.y,P=e.c3,j=e.eb,x=e.ec,k=e.cY,B=e.ed,C=e.ee,w=e.ef,N=e.br,S=e.B,z=e.eg,R=e.eh,T=e.ei,M=e.C,D=e.J,F=e.ej,L=e.aW},e=>{$=e.R,A=e.u}],execute:function(){function r({value:e,onInput:n,onBlur:r}){const p=t(),{value:m,handleInput:d,handleBlur:_}=function({defaultEmail:e}){const{record:n}=a(),{autoOptIn:r,isOptedIn:t}=l(),[o,i]=u(e),p=c(void 0),m=s((()=>{o!==p.current&&(p.current=o,n({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:{action:"update_email_input",email:o,source:"order_created",trigger:r&&t?"auto":"manual"}}))}),[r,t,o,n]);return{value:o,handleInput:e=>{i(e)},handleBlur:()=>{m()}}}({defaultEmail:e});return o(i,{type:"email",id:"email",name:"email",label:p("shop_pay_remember_me.email_label","Email"),value:m,onInput:e=>{d(e),null==n||n(e)},onBlur:()=>{_(),null==r||r()},required:!1})}function q(){const e=p(void 0),r=p(void 0),a=t(),l=m(),[,u]=d(),c=_(),O=l.shippingAddress.fields.firstName.value,E=f("shipping"),P=!h((()=>null!=E?E:c),[E,c]).isRequired("firstName")&&!b(O),j=s((e=>{if(!b(e))return a("field_errors.address_first_name_blank","Enter a first name")}),[a]),x=s((n=>{if(!P)return;if(!b(n))return r.value=v.InvalidOptInName,a("field_errors.address_first_name_blank","Enter a first name");const t=e.peek()||"";u({optInFirstName:t})}),[P,e,u,a,r]),k=y(e,r,j);return g(e,r,x,v.InvalidOptInName),P?o(I,{children:o(i,n({name:"shopFirstName",label:a("contact.first_name_label","First name"),required:!0},k))}):null}function X({countryCode:e,validationError:n,value:r,onBlur:i=()=>{},onInput:l=()=>{}}){const u=t(),{record:p}=a(),m=c(""),d=s((e=>{p({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:{action:"update_phone_input",phoneNumber:m.current,source:"order_created",trigger:e}})}),[p]);return O((()=>{m.current!==r&&(m.current=r,d("auto"))}),[d,r]),o(P,{error:n?o(E,{children:u("general.errors.buyer_identity.phone_number_does_not_match_expected_pattern","The specified phone number does not match the expected pattern.")}):void 0,countryCode:e,label:u("shop_pay_remember_me.mobile_phone_number","Mobile phone number"),value:r,icon:"mobile",prefillCountryCode:Boolean(e),onInputValueChange:n=>{null==l||l(n,e),m.current=n},onBlur:()=>{d("manual"),null==i||i()},onSelectedCountryChange:(e,n)=>{null==l||l(n,e),m.current=n}})}e({L:function({localizationExtension:e,index:r}){var t;const a=M(),{negotiate:l}=D(),[c,s]=u(),[p,m]=u(),d=y(e.fields.value,a),_=e.fields.title.value,{localizedFieldErrors:f}=F(),h=`$.cart.localizedField.${e.peek().key}`,b=`$.localizationExtension[${r}]`,v=f.find((({target:e})=>e===h)),g=e=>{var n;const r=null===(n=e.violations)||void 0===n?void 0:n.find((e=>{const{code:n,localizedMessage:r,nonLocalizedMessage:t,target:o}=e;if("LOCALIZATION_EXTENSION_FIELD_ERROR"===n&&o===b)return null!=r?r:t}));if(!r)return;const{localizedMessage:t,nonLocalizedMessage:o}=r;return null!=t?t:o};return O((()=>{a.value=v?v.message:p||void 0}),[a,v,p,c]),L((e=>{m(g(e)),s("submit")})),o(i,n(n({},d),{},{label:_,name:_,onBlur:()=>{d.onBlur(),s(void 0),m(void 0),l({fieldsToResolve:["localizationExtensions"],include:["localizationExtensions"],onComplete:e=>{m(g(e)),s("blur")}})},value:null!==(t=d.value)&&void 0!==t?t:void 0}))},R:function(){const{record:e}=a(),n=m(),{value:t}=j(),{autoOptIn:i,isOptedIn:p}=l(),[_,f]=d(),h=_||i&&void 0===_,b=n.phone.value,v=n.email.value,y=!b,{shopPayOptInPhone:g}=t||{},E=x(),[P,R]=u(E),T=k(),[M,D]=u([]),F=M.includes(G)||Boolean(_),L=!y,{validate:A,error:J}=B(P,F,L),K=C(),V=w(P),W=c(V),[Y,Z]=u(_&&_.vaultPhone||g||V||""),[Q,U]=u(_&&(null==_?void 0:_.vaultEmail)||v||""),ee=s(((n,r)=>{e({schemaId:"shopify_pay_user_optin_ui_interaction/3.2",payload:{action:n,phoneNumber:r.phone,email:r.email,source:"order_created",trigger:i&&p?"auto":"manual"}})}),[e,i,p]),ne=s((e=>{A(e,P)||T("violationError",{error:{message:"The specified phone number does not match the expected pattern",code:"remember_me_phone_error",field:"phone",origin:"client",type:"inline-validation"},timestamp:new Date})}),[P,A,T]),re=s(((e,n)=>{R(n),Z(e);const r=K(e,n);f({optInPhone:null!=r?r:e,optInEmail:""})}),[f,K]),te=s((e=>{U(e);const n=K(b,P);f({optInPhone:null!=n?n:b,optInEmail:e})}),[K,b,f,P]),oe=s((e=>{D(e);const n=e.includes(G),r=_&&_.vaultPhone||g||V||Y,t=_&&_.vaultEmail||Q;Z(r),U(t);const o=K(r,P);f(!!n&&{optInPhone:null!=o?o:r,optInEmail:y?"":t}),n&&r&&A(r,P),ee(n?"click_remember_me_box":"unclick_remember_me_box",{phone:r,email:t})}),[P,Q,K,A,Y,ee,f,g,V,_,y]);return O((()=>{if(!M.includes(G)||!i)return;const e=!Y||""===Y,n=V||g||void 0;e&&n&&n!==W.current?(re(n,P),ne(n),W.current=n):e||(W.current=n)}),[M,Y,P,V,g,_,re,i,ee,ne]),O((()=>{D(h?[G]:[])}),[h]),O((()=>{F&&Y&&A(Y,P)}),[]),O((()=>{if(e({schemaId:"shopify_pay_user_optin_ui_impression/1.0",payload:{elementType:"remember_me_box",source:"order_created"}}),i&&p){const e=y?"":Q;ee("click_remember_me_box",{phone:Y,email:Q}),f({optInPhone:Y,optInEmail:e})}}),[i,e,ee]),o(z,{name:"RememberMe",value:M,variant:"group",onChange:oe,children:o(N,{id:G,details:o(I,{children:[o(q,{}),y?o(X,{countryCode:P,validationError:J,value:Y,onInput:re,onBlur:()=>ne(Y)}):o(r,{value:Q,onInput:te}),p?null:o(S,{children:o($,{field:y?"phone":"email",link:null})})]}),children:o(H,{})})})},u:function(){const{value:e}=T();return Boolean(e)}});const G="RememberMeCheckbox";function H(){const e=t(),n=R(),{autoOptIn:r}=l(),{inTreatment:i}=A();return o(E,r||i?{children:e("shop_pay_remember_me.label_shop_account","Save my information for a faster checkout with a Shop account")}:n?{children:e("shop_pay_remember_me.payment_information_only_label","Save my payment information for a faster checkout")}:{children:e("shop_pay_remember_me.label","Save my information for a faster checkout")})}}}}))}();
